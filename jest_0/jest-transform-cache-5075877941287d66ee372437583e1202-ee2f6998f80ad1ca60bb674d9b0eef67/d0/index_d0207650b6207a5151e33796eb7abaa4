395b61d08a2bdcd0b12934a9fca2a6ff
const uuid = require("uuid/v1");

class Transaction {
  constructor({
    senderWallet,
    receiver,
    amount
  }) {
    this.id = uuid();
    this.outputMap = this.createOutputMap({
      senderWallet,
      receiver,
      amount
    });
    this.input = this.createInput({
      senderWallet,
      outputMap: this.outputMap
    });
  }

  static validateTransaction(transaction) {
    return true;
  }

  createOutputMap({
    senderWallet,
    receiver,
    amount
  }) {
    const outputMap = {};
    outputMap[receiver] = amount;
    outputMap[senderWallet.publicKey] = senderWallet.balance - amount;
    return outputMap;
  }

  createInput({
    senderWallet,
    outputMap
  }) {
    return {
      timestamp: Date.now(),
      amount: senderWallet.balance,
      address: senderWallet.publicKey,
      signature: senderWallet.sign(outputMap)
    };
  }

}

module.exports = Transaction;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInV1aWQiLCJyZXF1aXJlIiwiVHJhbnNhY3Rpb24iLCJjb25zdHJ1Y3RvciIsInNlbmRlcldhbGxldCIsInJlY2VpdmVyIiwiYW1vdW50IiwiaWQiLCJvdXRwdXRNYXAiLCJjcmVhdGVPdXRwdXRNYXAiLCJpbnB1dCIsImNyZWF0ZUlucHV0IiwidmFsaWRhdGVUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwicHVibGljS2V5IiwiYmFsYW5jZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJhZGRyZXNzIiwic2lnbmF0dXJlIiwic2lnbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBcEI7O0FBRUEsTUFBTUMsV0FBTixDQUFrQjtBQUNoQkMsRUFBQUEsV0FBVyxDQUFDO0FBQUVDLElBQUFBLFlBQUY7QUFBZ0JDLElBQUFBLFFBQWhCO0FBQTBCQyxJQUFBQTtBQUExQixHQUFELEVBQXFDO0FBQzlDLFNBQUtDLEVBQUwsR0FBVVAsSUFBSSxFQUFkO0FBQ0EsU0FBS1EsU0FBTCxHQUFpQixLQUFLQyxlQUFMLENBQXFCO0FBQUVMLE1BQUFBLFlBQUY7QUFBZ0JDLE1BQUFBLFFBQWhCO0FBQTBCQyxNQUFBQTtBQUExQixLQUFyQixDQUFqQjtBQUNBLFNBQUtJLEtBQUwsR0FBYSxLQUFLQyxXQUFMLENBQWlCO0FBQUVQLE1BQUFBLFlBQUY7QUFBZ0JJLE1BQUFBLFNBQVMsRUFBRSxLQUFLQTtBQUFoQyxLQUFqQixDQUFiO0FBQ0Q7O0FBRUQsU0FBT0ksbUJBQVAsQ0FBMkJDLFdBQTNCLEVBQXdDO0FBQ3RDLFdBQU8sSUFBUDtBQUNEOztBQUVESixFQUFBQSxlQUFlLENBQUM7QUFBRUwsSUFBQUEsWUFBRjtBQUFnQkMsSUFBQUEsUUFBaEI7QUFBMEJDLElBQUFBO0FBQTFCLEdBQUQsRUFBcUM7QUFDbEQsVUFBTUUsU0FBUyxHQUFHLEVBQWxCO0FBRUFBLElBQUFBLFNBQVMsQ0FBQ0gsUUFBRCxDQUFULEdBQXNCQyxNQUF0QjtBQUNBRSxJQUFBQSxTQUFTLENBQUNKLFlBQVksQ0FBQ1UsU0FBZCxDQUFULEdBQW9DVixZQUFZLENBQUNXLE9BQWIsR0FBdUJULE1BQTNEO0FBRUEsV0FBT0UsU0FBUDtBQUNEOztBQUVERyxFQUFBQSxXQUFXLENBQUM7QUFBRVAsSUFBQUEsWUFBRjtBQUFnQkksSUFBQUE7QUFBaEIsR0FBRCxFQUE4QjtBQUN2QyxXQUFPO0FBQ0xRLE1BQUFBLFNBQVMsRUFBRUMsSUFBSSxDQUFDQyxHQUFMLEVBRE47QUFFTFosTUFBQUEsTUFBTSxFQUFFRixZQUFZLENBQUNXLE9BRmhCO0FBR0xJLE1BQUFBLE9BQU8sRUFBRWYsWUFBWSxDQUFDVSxTQUhqQjtBQUlMTSxNQUFBQSxTQUFTLEVBQUVoQixZQUFZLENBQUNpQixJQUFiLENBQWtCYixTQUFsQjtBQUpOLEtBQVA7QUFNRDs7QUEzQmU7O0FBOEJsQmMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCckIsV0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB1dWlkID0gcmVxdWlyZShcInV1aWQvdjFcIik7XHJcblxyXG5jbGFzcyBUcmFuc2FjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBzZW5kZXJXYWxsZXQsIHJlY2VpdmVyLCBhbW91bnQgfSkge1xyXG4gICAgdGhpcy5pZCA9IHV1aWQoKTtcclxuICAgIHRoaXMub3V0cHV0TWFwID0gdGhpcy5jcmVhdGVPdXRwdXRNYXAoeyBzZW5kZXJXYWxsZXQsIHJlY2VpdmVyLCBhbW91bnQgfSk7XHJcbiAgICB0aGlzLmlucHV0ID0gdGhpcy5jcmVhdGVJbnB1dCh7IHNlbmRlcldhbGxldCwgb3V0cHV0TWFwOiB0aGlzLm91dHB1dE1hcCB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyB2YWxpZGF0ZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZU91dHB1dE1hcCh7IHNlbmRlcldhbGxldCwgcmVjZWl2ZXIsIGFtb3VudCB9KSB7XHJcbiAgICBjb25zdCBvdXRwdXRNYXAgPSB7fTtcclxuXHJcbiAgICBvdXRwdXRNYXBbcmVjZWl2ZXJdID0gYW1vdW50O1xyXG4gICAgb3V0cHV0TWFwW3NlbmRlcldhbGxldC5wdWJsaWNLZXldID0gc2VuZGVyV2FsbGV0LmJhbGFuY2UgLSBhbW91bnQ7XHJcblxyXG4gICAgcmV0dXJuIG91dHB1dE1hcDtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUlucHV0KHsgc2VuZGVyV2FsbGV0LCBvdXRwdXRNYXAgfSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICBhbW91bnQ6IHNlbmRlcldhbGxldC5iYWxhbmNlLFxyXG4gICAgICBhZGRyZXNzOiBzZW5kZXJXYWxsZXQucHVibGljS2V5LFxyXG4gICAgICBzaWduYXR1cmU6IHNlbmRlcldhbGxldC5zaWduKG91dHB1dE1hcClcclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zYWN0aW9uO1xyXG4iXX0=